---
title: "Guia de Contribuição"
description: "Regras e padrões para contribuir com o projeto BackBet."
slug: "/docs/contributing"
---

# Guia de Contribuição

As contribuições para o projeto BackBet são restritas aos colaboradores autorizados. Este guia consolida o fluxo esperado, padrões de qualidade e exigências de segurança para manter o repositório saudável.

## Fluxo de Trabalho

1. **Atualize a base**: `git checkout main && git pull origin main`.
2. **Abra uma branch descritiva** seguindo o padrão `feature/<dominio>-<slug>` ou `fix/<issue>-<slug>` (ex.: `feature/betting-cache-hooks`).
3. **Implemente e commite** usando mensagens convencionais (ver abaixo).
4. **Sincronize com a main** antes de abrir o PR (`git pull --rebase origin main`).
5. **Abra o Pull Request** preenchendo o template padrão, descrevendo contexto, testes executados e verificações de observabilidade.
6. **Aguarde revisão técnica**; nenhum PR é mesclado sem ao menos 1 aprovação.

## Commits e Branches

- Use prefixos do Conventional Commits: `feat`, `fix`, `chore`, `docs`, `refactor`, `test`, `revert`.
- Commits devem focar em uma unidade lógica. Prefira mensagens no imperativo ("add Redis cache busting").
- Não faça force-push na branch principal. Em branches de feature, force-push apenas se combinado com quem revisa.

## Checklist de Qualidade

Execute e copie para o PR o resultado dos seguintes comandos (na ordem):

```bash
npm run lint
npm run test:coverage
npm run build
npm run format
```

- `npm run dev` deve subir sem erros, expondo `/health`, `/readiness` e `/metrics`.
- Novas migrations, seeds ou scripts precisam estar documentados em `docs/` e referenciados no README/Quickstart.
- Se o cache ou tracing estiverem envolvidos, mencione como validar (`CACHE_ENABLED`, `TRACING_ENABLED`).

## Testes e Cobertura

- Todo novo caso de uso precisa de testes (unitários ou integração leve). Use os repositórios in-memory quando não for essencial tocar Mongo.
- Para workflows que dependem de Mongo/Redis reais, utilize os helpers de teste (`mongoMockHelper`, `redisTestClient`) ou configure containers nos pipelines.
- Garanta que o Jest passe limpo (`npm test`). Falhas intermitentes devem ser abertas como issues antes do merge.
- Atualize snapshots e dados seeds quando alterar contratos das rotas ou DTOs.

## Documentação e Observabilidade

- Alterou comportamento público? Atualize o doc correspondente (`docs/ARCHITECTURE`, `docs/API_DOCS`, `docs/OBSERVABILITY`, `docs/QUICKSTART`).
- Mantenha exemplos de payloads e env vars consistentes (ex.: `CACHE_ENABLED`, `TRACING_ENABLED`, `RATE_LIMIT_*`).
- Adicione métricas/logs/traços quando implementar novos fluxos críticos. Documente brevemente no PR onde encontrar esses sinais.

## Segurança e Compliance

- **Nunca** commite arquivos `.env`, chaves, tokens, dumps ou dados de produção.
- Sanitize logs/prints antes de anexar a PRs ou issues.
- Dependências novas devem passar por `npm audit` e ter justificativa no PR se houver riscos médios/altos.

## Dúvidas

Em caso de bloqueios, abra um tópico no canal interno de plataforma ou contate a liderança técnica. A aprovação de acesso adicional ao repositório segue o processo padrão da equipe de segurança.
